# Nicolas Fagnoni's CST Simulations

## Origin

The `*.fits` simulation beams here originate from Nicolas Fagnoni's simulations.
The older ones (dipole feed) are on github at:

https://github.com/Nicolas-Fagnoni/Simulations

All the simulations (old and new) can be found on google drive here:

https://drive.google.com/open?id=0B2jOp1twrZPrdGxIVXUzMnRXemM

## Converting to UVBeam formats

The script `convert_to_uvbeam.py` allows for converting E-field and power beam patterns from these original CST files to pyuvdata's UVBeam object and the beam FITS format. It also supports converting to HEALPix and limiting the frequency range of the beams read in. Only "East" polarization (labeled 'x') is available from the simulations, but "North" is created by rotating the beam ninety degrees because there is nothing in the simulation that breaks the symmetry.

The specification of metadata for these files is now (as of 8 March 2019) done using a settings yaml file. The yaml files are on this repo and but should be copied into the folder with the beam files if you wish to run the `convert_to_uvbeam.py` script. (In the future, the yaml files will be stored alongside the CST files in google drive.)

# Beam files in this repo

The files generated by this script and saved in this repo follow the pyuvdata beamfits format (described here: https://github.com/HERA-Team/pyuvdata/blob/master/docs/references/beamfits_memo.pdf),
and can be read into pyuvdata's UVBeam object using the `UVBeam.read_beamfits` method.

## Provenance

The history of the fits beam files in this folder (actually stored on Git LFS) is:

### old Dipole beam files:
 * file generation date: 8 March 2019
 * data source: google drive "HERA 4.9m - E-field" folder inside "HERA dipole - beams.zip"
 * settings file: `HERA_Dipole_CST_beams.yaml`
 * pyuvdata version: `cst_yaml` branch, hash 637668a4a37186cdf304976641333dffce8f829f

### new Vivaldi beam files:
 * file generation date: 8 March 2019
 * data source: google drive "Vivaldi 1.8m - detailed mecha design - E-field - 100 ohm load - Pol X" folder inside "Vivaldi feed + dish - detailed mecha design.zip"
 * settings file: `HERA_Vivaldi_CST_beams.yaml`
 * pyuvdata version: `cst_yaml` branch, hash 637668a4a37186cdf304976641333dffce8f829f
